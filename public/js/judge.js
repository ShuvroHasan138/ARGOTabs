(function(){define(["util"],function(a){var b;return b=function(){function d(a,b){var c,d,e,f,g,h;this.tournament=a;if(b)for(c in b)e=b[c],this[c]=e;this.name==null&&(this.name=""),this.rank==null&&(this.rank=0),this.rounds==null&&(this.rounds={});if(!b){h=this.tournament.rounds;for(f=0,g=h.length;f<g;f++)d=h[f],d.registerJudge(this)}}var b,c;d.rankStrings=["A","B","C","D"];for(b=c=4;c<=31;b=++c)d.rankStrings.push(null);return d.rankStrings.push("Shd"),d.ranks=[0,1,2,3,32],d.shadowRank=32,d.prototype.unpackCycles=function(){var b,c,d,e,f,g;this.club=a.unpackCycle(this.club,this.tournament.clubs),f=this.tournament.rounds,g=[];for(d=0,e=f.length;d<e;d++)c=f[d],b=this.rounds[c.id],b!=null?g.push(b.ballot=a.unpackCycle(b.ballot,c.ballots)):g.push(void 0);return g},d.prototype.toJSON=function(){var b,c,d,e,f,g,h;b=a.copyObject(this,["tournament"]),b.club=a.packCycle(this.club,this.tournament.clubs),b.rounds={},h=this.tournament.rounds;for(f=0,g=h.length;f<g;f++)e=h[f],d=this.rounds[e.id],d!=null&&(c=a.copyObject(d,[]),c.ballot=a.packCycle(c.ballot,e.ballots)),b.rounds[e.id]=c;return b},d.prototype.destroy=function(){var a,b,c,d;d=this.tournament.rounds;for(b=0,c=d.length;b<c;b++)a=d[b],a.unregisterJudge(this);return this.club&&this.club.removeJudge(this),this.tournament.destroyEntityInJudgeRules(this)},d}()})}).call(this)
(function(){define(["util"],function(e){var t;return t=function(){function t(e,t){var n,r,i,o,s,l;if(this.tournament=e,t)for(n in t)i=t[n],this[n]=i;if(null==this.name&&(this.name=""),null==this.rank&&(this.rank=0),null==this.rounds&&(this.rounds={}),!t)for(l=this.tournament.rounds,o=0,s=l.length;s>o;o++)r=l[o],r.registerJudge(this)}var n,r;for(t.rankStrings=["A","B","C"],n=r=3;31>=r;n=++r)t.rankStrings.push(null);return t.rankStrings.push("Shd"),t.ranks=[0,1,2,32],t.shadowRank=32,t.prototype.unpackCycles=function(){var t,n,r,i,o,s;for(this.club=e.unpackCycle(this.club,this.tournament.clubs),o=this.tournament.rounds,s=[],r=0,i=o.length;i>r;r++)n=o[r],t=this.rounds[n.id],null!=t?s.push(t.ballot=e.unpackCycle(t.ballot,n.ballots)):s.push(void 0);return s},t.prototype.toJSON=function(){var t,n,r,i,o,s,l;for(t=e.copyObject(this,["tournament"]),t.club=e.packCycle(this.club,this.tournament.clubs),t.rounds={},l=this.tournament.rounds,o=0,s=l.length;s>o;o++)i=l[o],r=this.rounds[i.id],null!=r&&(n=e.copyObject(r,[]),n.ballot=e.packCycle(n.ballot,i.ballots)),t.rounds[i.id]=n;return t},t.prototype.destroy=function(){var e,t,n,r;for(r=this.tournament.rounds,t=0,n=r.length;n>t;t++)e=r[t],e.unregisterJudge(this);return this.club?this.club.removeJudge(this):void 0},t}()})}).call(this);
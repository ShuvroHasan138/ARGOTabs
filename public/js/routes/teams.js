(function(){define(["team"],function(t){return function(e,n){return n.when("/teams",{templateUrl:"partials/teams.html",controller:["$scope",function(n){return n.addTeam=function(){var n,r;return r=e.tournament,n=new t(r),r.teams.push(n)},n.removeTeam=function(t){var n;return n=e.tournament.teams,n[t].destroy(),n.splice(t,1)},n.canRemoveTeam=function(t){var n,r,o,i,a;for(a=e.tournament.rounds,o=0,i=a.length;i>o;o++)if(r=a[o],n=t.rounds[r.id],null!=n&&null!=n.ballot)return!1;return!0},n.canRemovePlayer=function(t){var n,r,o,i,a,s,l,u,c,d;for(a=t.team,d=e.tournament.rounds,s=0,c=d.length;c>s;s++)if(i=d[s],o=a.rounds[i.id],null!=o&&null!=o.ballot&&o.ballot.locked&&null!=o.ballot.roles)for(n=l=0;2>l;n=++l)for(r=u=0;4>u;r=++u)if(o.ballot.roles[n][r]===t)return!1;return!0},n.initRepeat=function(t){return t.$watch(function(){return t.o.club},function(e,n){var r;if(e!==n)return r=t.o,n&&n.removeTeam(r),e?e.addTeam(r):void 0})},n.eliminateNil=function(t){return null==t?"":t}}]})}})}).call(this);
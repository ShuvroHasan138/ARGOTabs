(function(){define(["team","util","underscore"],function(t,e){return function(n,r){return r.when("/team-rank",{templateUrl:"partials/team-rank.html",controller:["$scope",function(n){var r,o,i,a;return r=function(){var t,e,r,o,i,a,s,l,u,c;if(o=n.tournament,e=o.rankFromTeams,t={},e.all)for(u=o.rounds,i=0,s=u.length;s>i;i++)r=u[i],r.paired&&(t[r.id]=!0);else for(c=o.rounds,a=0,l=c.length;l>a;a++)r=c[a],r.paired&&e[r.id]&&(t[r.id]=!0);return t},o=function(t){var e,o,i,a,s;for(e=[],null==t&&(t=r()),s=n.tournament.rounds,i=0,a=s.length;a>i;i++)o=s[i],t[o.id]&&e.push(o);return e},i=function(e){var r,i,a;return a=n.tournament,i=n.teams=a.teams.slice(0),null==e&&(e=o()),t.calculateStats(i,e),r=a.teamRankSorter.compareObjects,i.sort(function(t,e){return r(t.stats,e.stats)})},a=null,e.installScopeUtils(n),console.log(n.truncFloat),n.$watch(function(){return JSON.stringify(a=r())},function(){return i(o(a))})}]})}})}).call(this);
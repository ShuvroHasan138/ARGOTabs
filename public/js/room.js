(function(){define(["util"],function(a){var b;return b=function(){function b(a,b){var c,d,e,f,g,h;this.tournament=a;if(b)for(c in b)e=b[c],this[c]=e;this.name==null&&(this.name=""),this.floor==null&&(this.floor=""),this.rounds==null&&(this.rounds={});if(!b){h=this.tournament.rounds;for(f=0,g=h.length;f<g;f++)d=h[f],d.registerRoom(this)}}return b.prototype.unpackCycles=function(){var b,c,d,e,f,g;f=this.tournament.rounds,g=[];for(d=0,e=f.length;d<e;d++)c=f[d],b=this.rounds[c.id],b!=null?g.push(b.ballot=a.unpackCycle(b.ballot,c.ballots)):g.push(void 0);return g},b.prototype.toJSON=function(){var b,c,d,e,f,g,h;b=a.copyObject(this,["tournament"]),b.rounds={},h=this.tournament.rounds;for(f=0,g=h.length;f<g;f++)e=h[f],d=this.rounds[e.id],d!=null&&(c=a.copyObject(d,[]),c.ballot=a.packCycle(c.ballot,e.ballots)),b.rounds[e.id]=c;return b},b.prototype.destroy=function(){var a,b,c,d,e;d=this.tournament.rounds,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(a.unregisterRoom(this));return e},b}()})}).call(this)
(function(){define(["util"],function(e){var t;return t=function(){function t(e,t){var n,r,o,i,s,a;if(this.tournament=e,t)for(n in t)o=t[n],this[n]=o;if(null==this.name&&(this.name=""),null==this.floor&&(this.floor=""),null==this.rounds&&(this.rounds={}),!t)for(a=this.tournament.rounds,i=0,s=a.length;s>i;i++)r=a[i],r.registerRounds(this)}return t.prototype.unpackCycles=function(){var t,n,r,o,i,s;for(i=this.tournament.rounds,s=[],r=0,o=i.length;o>r;r++)n=i[r],t=this.rounds[n.id],null!=t?s.push(t.ballot=e.unpackCycle(t.ballot,n.ballots)):s.push(void 0);return s},t.prototype.toJSON=function(){var t,n,r,o,i,s,a;for(t=e.copyObject(this,["tournament"]),t.rounds={},a=this.tournament.rounds,i=0,s=a.length;s>i;i++)o=a[i],r=this.rounds[o.id],null!=r&&(n=e.copyObject(r,[]),n.ballot=e.packCycle(n.ballot,o.ballots)),t.rounds[o.id]=n;return t},t.prototype.destroy=function(){var e,t,n,r,o;for(r=this.tournament.rounds,o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(e.unregisterRoom(this));return o},t}()})}).call(this);
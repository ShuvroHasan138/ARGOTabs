define(function(){var e={alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",lookup:null,ie:/MSIE /.test(navigator.userAgent),ieo:/MSIE [67]/.test(navigator.userAgent),encode:function(t){var n,r,i=e.toUtf8(t),o=-1,a=i.length,s=[,,,];if(e.ie){for(var u=[];++o<a;)n=i[o+1],r=i[o+2],s[0]=i[o]>>2,s[1]=(3&i[o])<<4|i[++o]>>4,isNaN(n)?s[2]=s[3]=64:(s[2]=(15&i[o])<<2|i[++o]>>6,s[3]=isNaN(r)?64:63&i[o]),u.push(e.alphabet[s[0]],e.alphabet[s[1]],e.alphabet[s[2]],e.alphabet[s[3]]);return u.join("")}for(u="";++o<a;)n=i[o+1],r=i[o+2],s[0]=i[o]>>2,s[1]=(3&i[o])<<4|i[++o]>>4,isNaN(n)?s[2]=s[3]=64:(s[2]=(15&i[o])<<2|i[++o]>>6,s[3]=isNaN(r)?64:63&i[o]),u+=e.alphabet[s[0]]+e.alphabet[s[1]]+e.alphabet[s[2]]+e.alphabet[s[3]];return u},decode:function(t){var n=e.fromUtf8(t),r=0,i=n.length;if(e.ieo){for(result=[];i>r;)n[r]<128?result.push(String.fromCharCode(n[r++])):n[r]>191&&n[r]<224?result.push(String.fromCharCode((31&n[r++])<<6|63&n[r++])):result.push(String.fromCharCode((15&n[r++])<<12|(63&n[r++])<<6|63&n[r++]));return result.join("")}for(result="";i>r;)result+=n[r]<128?String.fromCharCode(n[r++]):n[r]>191&&n[r]<224?String.fromCharCode((31&n[r++])<<6|63&n[r++]):String.fromCharCode((15&n[r++])<<12|(63&n[r++])<<6|63&n[r++]);return result},toUtf8:function(e){var t,n=-1,r=e.length,i=[];if(/^[\x00-\x7f]*$/.test(e))for(;++n<r;)i.push(e.charCodeAt(n));else for(;++n<r;)t=e.charCodeAt(n),128>t?i.push(t):2048>t?i.push(192|t>>6,128|63&t):i.push(224|t>>12,128|63&t>>6,128|63&t);return i},fromUtf8:function(t){var n,r=-1,i=[],o=[,,,];if(!e.lookup){for(n=e.alphabet.length,e.lookup={};++r<n;)e.lookup[e.alphabet[r]]=r;r=-1}for(n=t.length;n>r&&(o[0]=e.lookup[t.charAt(++r)],o[1]=e.lookup[t.charAt(++r)],i.push(o[0]<<2|o[1]>>4),o[2]=e.lookup[t.charAt(++r)],64!=o[2])&&(i.push((15&o[1])<<4|o[2]>>2),o[3]=e.lookup[t.charAt(++r)],64!=o[3]);)i.push((3&o[2])<<6|o[3]);return i}};return e});
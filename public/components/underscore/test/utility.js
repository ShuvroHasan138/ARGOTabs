$(document).ready(function(){var t;module("Utility",{setup:function(){t=_.clone(_.templateSettings)},teardown:function(){_.templateSettings=t}}),test("#750 - Return _ instance.",2,function(){var t=_([]);ok(_(t)===t),ok(new _(t)===t)}),test("identity",function(){var t={name:"moe"};equal(_.identity(t),t,"moe is the same as his identity")}),test("random",function(){var t=_.range(1e3),e=Math.pow(2,31),n=Math.pow(2,62);ok(_.every(t,function(){return _.random(e,n)>=e}),"should produce a random number greater than or equal to the minimum number"),ok(_.some(t,function(){return _.random(Number.MAX_VALUE)>0}),"should produce a random number when passed `Number.MAX_VALUE`")}),test("uniqueId",function(){for(var t=[],e=0;e++<100;)t.push(_.uniqueId());equal(_.uniq(t).length,t.length,"can generate a globally-unique stream of ids")}),test("times",function(){var t=[];_.times(3,function(e){t.push(e)}),ok(_.isEqual(t,[0,1,2]),"is 0 indexed"),t=[],_(3).times(function(e){t.push(e)}),ok(_.isEqual(t,[0,1,2]),"works as a wrapper"),ok(_.isEqual([0,1,2],_.times(3,function(t){return t})),"collects return values")}),test("mixin",function(){_.mixin({myReverse:function(t){return t.split("").reverse().join("")}}),equal(_.myReverse("panacea"),"aecanap","mixed in a function to _"),equal(_("champ").myReverse(),"pmahc","mixed in a function to the OOP wrapper")}),test("_.escape",function(){equal(_.escape("Curly & Moe"),"Curly &amp; Moe"),equal(_.escape("Curly &amp; Moe"),"Curly &amp;amp; Moe"),equal(_.escape(null),"")}),test("_.unescape",function(){var t="Curly & Moe";equal(_.unescape("Curly &amp; Moe"),t),equal(_.unescape("Curly &amp;amp; Moe"),"Curly &amp; Moe"),equal(_.unescape(null),""),equal(_.unescape(_.escape(t)),t)}),test("template",function(){var t=_.template("<%= thing %> is gettin' on my noives!"),e=t({thing:"This"});equal(e,"This is gettin' on my noives!","can do basic attribute interpolation");var n=_.template("A <% this %> B");equal(n(),"A  B");var r=_.template("<%= thing %> is \\ridanculous");equal(r({thing:"This"}),"This is \\ridanculous");var i=_.template('<%= a ? "checked=\\"checked\\"" : "" %>');equal(i({a:!0}),'checked="checked"',"can handle slash escapes in interpolations.");var o=_.template("<ul><%       for (var key in people) {     %><li><%= people[key] %></li><% } %></ul>");e=o({people:{moe:"Moe",larry:"Larry",curly:"Curly"}}),equal(e,"<ul><li>Moe</li><li>Larry</li><li>Curly</li></ul>","can run arbitrary javascript in templates");var a=_.template("<ul><% _.each(numbers.split('\\n'), function(item) { %><li><%= item %></li><% }) %></ul>");e=a({numbers:"one\ntwo\nthree\nfour"}),equal(e,"<ul><li>one</li><li>two</li><li>three</li><li>four</li></ul>","Can use escaped characters (e.g. \\n) in Javascript");var s=_.template('<%= pageCount %> <%= thumbnails[pageCount] %> <% _.each(thumbnails, function(p) { %><div class="thumbnail" rel="<%= p %>"></div><% }); %>');e=s({pageCount:3,thumbnails:{1:"p1-thumbnail.gif",2:"p2-thumbnail.gif",3:"p3-thumbnail.gif"}}),equal(e,'3 p3-thumbnail.gif <div class="thumbnail" rel="p1-thumbnail.gif"></div><div class="thumbnail" rel="p2-thumbnail.gif"></div><div class="thumbnail" rel="p3-thumbnail.gif"></div>');var u=_.template("<div><p>Just some text. Hey, I know this is silly but it aids consistency.</p></div>");e=u(),equal(e,"<div><p>Just some text. Hey, I know this is silly but it aids consistency.</p></div>");var l=_.template("It's its, not it's");equal(l({}),"It's its, not it's");var c=_.template("<%      if(foo == 'bar'){     %>Statement quotes and 'quotes'.<% } %>");equal(c({foo:"bar"}),"Statement quotes and 'quotes'.");var f=_.template("This\n		is: <%= x %>.\n	ok.\nend.");equal(f({x:"that"}),"This\n		is: that.\n	ok.\nend.");var d=_.template("<i><%- value %></i>"),e=d({value:"<script>"});equal(e,"<i>&lt;script&gt;</i>");var h={name:"Moe",template:_.template("I'm <%= this.name %>")};if(equal(h.template(),"I'm Moe"),!$.browser.msie){var p=_.template($("#template").html());equal(p({data:12345}).replace(/\s/g,""),"<li>24690</li>")}_.templateSettings={evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g};var m=_.template("<ul>{{ for (var key in people) { }}<li>{{= people[key] }}</li>{{ } }}</ul>");e=m({people:{moe:"Moe",larry:"Larry",curly:"Curly"}}),equal(e,"<ul><li>Moe</li><li>Larry</li><li>Curly</li></ul>","can run arbitrary javascript in templates");var g=_.template("It's its, not it's");equal(g({}),"It's its, not it's");var c=_.template("{{ if(foo == 'bar'){ }}Statement quotes and 'quotes'.{{ } }}");equal(c({foo:"bar"}),"Statement quotes and 'quotes'."),_.templateSettings={evaluate:/<\?([\s\S]+?)\?>/g,interpolate:/<\?=([\s\S]+?)\?>/g};var v=_.template("<ul><? for (var key in people) { ?><li><?= people[key] ?></li><? } ?></ul>");e=v({people:{moe:"Moe",larry:"Larry",curly:"Curly"}}),equal(e,"<ul><li>Moe</li><li>Larry</li><li>Curly</li></ul>","can run arbitrary javascript in templates");var y=_.template("It's its, not it's");equal(y({}),"It's its, not it's");var c=_.template("<? if(foo == 'bar'){ ?>Statement quotes and 'quotes'.<? } ?>");equal(c({foo:"bar"}),"Statement quotes and 'quotes'."),_.templateSettings={interpolate:/\{\{(.+?)\}\}/g};var b=_.template("Hello {{planet}}!");equal(b({planet:"World"}),"Hello World!","can mimic mustache.js");var w=_.template("a null undefined {{planet}}");equal(w({planet:"world"}),"a null undefined world","can handle missing escape and evaluate settings")}),test("_.template provides the generated function source, when a SyntaxError occurs",function(){try{_.template("<b><%= if x %></b>")}catch(t){var e=t.source}ok(/__p/.test(e))}),test("_.template handles \\u2028 & \\u2029",function(){var t=_.template('<p>\u2028<%= "\\u2028\\u2029" %>\u2029</p>');strictEqual(t(),"<p>\u2028\u2028\u2029\u2029</p>")}),test("result calls functions and returns primitives",function(){var t={w:"",x:"x",y:function(){return this.x}};strictEqual(_.result(t,"w"),""),strictEqual(_.result(t,"x"),"x"),strictEqual(_.result(t,"y"),"x"),strictEqual(_.result(t,"z"),void 0),strictEqual(_.result(null,"x"),null)}),test("_.templateSettings.variable",function(){var t="<%=data.x%>",e={x:"x"};strictEqual(_.template(t,e,{variable:"data"}),"x"),_.templateSettings.variable="data",strictEqual(_.template(t)(e),"x")}),test("#547 - _.templateSettings is unchanged by custom settings.",function(){ok(!_.templateSettings.variable),_.template("",{},{variable:"x"}),ok(!_.templateSettings.variable)}),test("#556 - undefined template variables.",function(){var t=_.template("<%=x%>");strictEqual(t({x:null}),""),strictEqual(t({x:void 0}),"");var e=_.template("<%-x%>");strictEqual(e({x:null}),""),strictEqual(e({x:void 0}),"");var n=_.template("<%=x.foo%>");strictEqual(n({x:{}}),""),strictEqual(n({x:{}}),"");var r=_.template("<%-x.foo%>");strictEqual(r({x:{}}),""),strictEqual(r({x:{}}),"")}),test("interpolate evaluates code only once.",2,function(){var t=0,e=_.template("<%= f() %>");e({f:function(){ok(!t++)}});var n=0,r=_.template("<%- f() %>");r({f:function(){ok(!n++)}})}),test("#746 - _.template settings are not modified.",1,function(){var t={};_.template("",null,t),deepEqual(t,{})}),test("#779 - delimeters are applied to unescaped text.",1,function(){var t=_.template("<<\nx\n>>",null,{evaluate:/<<(.*?)>>/g});strictEqual(t(),"<<\nx\n>>")})});
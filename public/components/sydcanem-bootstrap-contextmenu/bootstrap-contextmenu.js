!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=n,this.before=this.options.before||this.before,this.onItem=this.options.onItem||this.onItem,this.options.target&&this.$element.attr("data-target",this.options.target),this.listen()};t.prototype={constructor:t,show:function(t){var n,r,i=e(this);if(!i.is(".disabled, :disabled")&&(r=e.Event("context"),this.before.call(this,t,this.$element))){this.$element.trigger(r),n=this.getMenu();var o=this.getPosition(t,n);return n.attr("style","").css(o).addClass("open"),!1}},closemenu:function(){this.getMenu().removeClass("open")},before:function(){return!0},onItem:function(){return!0},listen:function(){var t=this;this.$element.on("contextmenu.context.data-api",e.proxy(this.show,this)),e("html").on("click.context.data-api",e.proxy(this.closemenu,this));var n=e(this.$element.attr("data-target"));n.on("click.context.data-api",function(n){t.onItem.call(this,n,e(n.target))}),e("html").on("click.context.data-api",function(e){e.ctrlKey||n.removeClass("open")})},getMenu:function(){var t,n=this.$element.attr("data-target");return n||(n=this.$element.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),t=e(n)},getPosition:function(t,n){var r,i,o=t.clientX,a=t.clientY,s=e(window).width(),u=e(window).height(),l=n.find(".dropdown-menu").outerWidth(),c=n.find(".dropdown-menu").outerHeight(),f={position:"fixed"};return r=a+c>u?{top:a-c}:{top:a},i=o+l>s&&o-l>0?{left:o-l}:{left:o},e.extend(f,r,i)},clearMenus:function(t){t.ctrlKey||e("[data-toggle=context]").each(function(){this.getMenu().removeClass("open")})}},e.fn.contextmenu=function(n,r){return this.each(function(){var i=e(this),o=i.data("context"),a="object"==typeof n&&n;o||i.data("context",o=new t(this,a)),"string"==typeof n&&o[n].call(o,r)})},e.fn.contextmenu.Constructor=t,e(document).on("contextmenu.context.data-api","[data-toggle=context]",function(t){e(this).contextmenu("show",t),t.preventDefault()})}(window.jQuery);